<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <canvas id="canvas" width="500" height="500" style="background: #ccc;">
        <p>your browser not support canvas</p>
    </canvas>
    <script src="../js/utils.js"></script>
    <script src="../js/arrow.js"></script>
    <script>
    (function(window, document) {
        window.addEventListener('DOMContentLoaded', function(e) {
            var canvas = document.querySelector('#canvas'),
                ctx = canvas.getContext('2d'),
                centerX = canvas.width / 2,
                centerY = canvas.height / 2;

            var mouse = utils.captureMouse(canvas);
            var arrow1 = new Arrow();
            var arrow2 = new Arrow();

            arrow1.x = centerX;
            arrow1.y = centerY;

            arrow2.x = centerX / 2;
            arrow2.y = centerY / 2;

            (function drawFrame() {
                window.requestAnimationFrame(drawFrame, canvas);
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                arrow1.rotation = RotationToMouse(mouse.x, mouse.y, arrow1.x, arrow1.y);
                arrow1.draw(ctx);

                arrow2.rotation = RotationToMouse(mouse.x, mouse.y, arrow2.x, arrow2.y);
                arrow2.draw(ctx);
            })();
        }, false);
    })(window, document);
    </script>
</body>
</html>
